## @section Image configuration
## @descriptionStart
## Container image settings. More info: https://kubernetes.io/docs/concepts/containers/images/
## @descriptionEnd
image:
  ## @param image.registry string Wireguard container image registry
  registry: docker.io
  ## @param image.repository string Wireguard container image repository
  repository: linuxserver/wireguard
  ## @param image.pullPolicy string Pull policy for the container image
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "1.0.20250521-r0-ls91@sha256:e93cfa43a087a6853c9f8090d7de25cea4cf6f8dc4dc576c70756188a301c4a6"

## @param imagePullSecrets list Secrets for pulling images from a private repository
imagePullSecrets: []
## @param nameOverride string Override the chart name
nameOverride: ""
## @param fullnameOverride string Override the full chart name
fullnameOverride: ""

## @param replicaCount int Number of replicas for the deployment
replicaCount: 1

## @section DNS configuration
## @descriptionStart
## DNS policy and configuration of the pod.
## E.g.
## ```yaml
## dnsPolicy: None
## dnsConfig:
##   searches:
##     - svc.cluster.local
##     - cluster.local
##   nameservers:
##     - 1.1.1.1
##     - 8.8.8.8
## ```
## @descriptionEnd

## @extra dnsPolicy string DNS policy for the pod (ClusterFirst, None, ClusterFirstWithHostNet, Default)
## @extra dnsConfig object DNS configuration for the pod (nameservers, searches, options)

## @section Host Network
## @descriptionStart
## Expose the pod on the host network.
## E.g.
## ```yaml
## hostNetwork: true
## ```
## @descriptionEnd

## @extra hostNetwork bool Use the host's network namespace

## @section Deployment strategy
## @descriptionStart
## NOTE: Set it to `Recreate` if you use a PersistentVolume that cannot be mounted on multiple pods.
## E.g.
## ```yaml
## updateStrategy:
##   type: Recreate
## ```
## Or with rolling update settings:
## ```yaml
## updateStrategy:
##   type: RollingUpdate
##   rollingUpdate:
##     maxSurge: 25%
##     maxUnavailable: 25%
## ```
## @descriptionEnd
updateStrategy:
  ## @param updateStrategy.type string Deployment strategy type (RollingUpdate or Recreate)
  type: RollingUpdate

## @section Init and Sidecar Containers
## @descriptionStart
## Add init containers or sidecars to the pod.
## E.g.
## ```yaml
## initContainers:
##   - name: init-sysctl
##     image: busybox
##     command: ["sysctl", "-w", "net.ipv4.ip_forward=1"]
##     securityContext:
##       privileged: true
##
## sidecars:
##   - name: logging
##     image: fluentd:latest
##     volumeMounts:
##       - name: logs
##         mountPath: /var/log
## ```
## @descriptionEnd

## @param initContainers list Init containers to add to the pod
initContainers: []

## @param sidecars list Sidecar containers to add to the pod
sidecars: []

## @section Wireguard configuration
## @descriptionStart
## Wireguard specific configuration. Client and server will always use the wg0 interface.
## @descriptionEnd
wireguard:
  ## @param wireguard.timezone string Timezone to use. See https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List (default: Etc/UTC)
  timezone: ""

  ## @extra wireguard.dns string DNS server for peer/client configs. Server default: auto, Client default: 1.1.1.1, 2606:4700:4700::1111
  ## @extra wireguard.allowedIPs string IPs/Ranges reachable via VPN. Default: 0.0.0.0/0, ::0/0 (all traffic through VPN)

  ## @param wireguard.PUID string User ID for the container process (default: 1000)
  PUID: "1000"
  ## @param wireguard.PGID string Group ID for the container process (default: 1000)
  PGID: "1000"

  ## @param wireguard.extraEnvVars list Extra environment variables for the wireguard container
  ## E.g.
  ## ```yaml
  ## extraEnvVars:
  ##   - name: LOG_CONFS
  ##     value: "true"
  ##   - name: LOG_JSON
  ##     value: "false"
  ## ```
  extraEnvVars: []

  ## @param wireguard.extraEnvVarsSecret string Name of existing Secret containing extra env vars
  extraEnvVarsSecret: ""

  ## @param wireguard.extraEnvVarsCM string Name of existing ConfigMap containing extra env vars
  extraEnvVarsCM: ""

  ## @param wireguard.existingSecret string Existing secret with full wg0.conf. NOTE: Overrides server/client config
  existingSecret: ""

  ## @section Wireguard Server Mode
  server:
    ## @param wireguard.server.enabled bool Enable WireGuard server mode (mutually exclusive with client mode)
    enabled: false

    ## @section Server storage configuration
    storage:
      ## @param wireguard.server.storage.existingClaim string Name of an existing PVC to use
      existingClaim: ""
      ## @param wireguard.server.storage.storageClass string Storage class for a new PVC (required when not using existingClaim)
      storageClass: ""
      ## @param wireguard.server.storage.size string Size of the PVC (required when not using existingClaim)
      size: 250Mi
      ## @param wireguard.server.storage.accessModes list Access modes for the PVC
      accessModes:
        - ReadWriteOnce
      ## @param wireguard.server.storage.annotations object Annotations to add to the PVC
      annotations: {}
      ## @param wireguard.server.storage.labels object Labels to add to the PVC
      labels: {}
      ## @param wireguard.server.storage.selector object Selector for the PVC
      selector: {}
      ## @param wireguard.server.storage.resourcePolicy string Resource policy of the PVC (keep or delete)
      resourcePolicy: keep

    ## @section Server config
    config:
      ## @param wireguard.server.config.address string External IP or domain name for clients to connect. Use "auto" for automatic detection
      address: vpn.example.com

      ## @param wireguard.server.config.peers string Number of peers or comma-separated names (e.g. myPC,myPhone,myTablet)
      peers: "1"

      ## @extra wireguard.server.config.subnet string Internal subnet for server and peers (default: 10.13.13.0/24)
      ## @extra wireguard.server.config.keepalivePeers string Peers to send keepalive packets to (default: all)
      ## @extra wireguard.server.config.peerQR bool Display QR codes in logs (default: false)

  ## @section Wireguard Client Mode
  client:
    ## @param wireguard.client.enabled bool Enable WireGuard client mode (mutually exclusive with server mode)
    enabled: false

    ## @section Client config
    config:
      ## @param wireguard.client.config.existingSecret string Secret containing privatekey, publickey, presharedkey from server peer config
      existingSecret: ""

      ## @param wireguard.client.config.address string IP Address to assign to the WireGuard peer
      address: "10.13.13.2/24"

      ## @extra wireguard.client.config.preUp string Hook to run before bringing up the interface
      ## @extra wireguard.client.config.postUp string Hook to run after bringing up the interface
      ## @extra wireguard.client.config.preDown string Hook to run before bringing down the interface
      ## @extra wireguard.client.config.postDown string Hook to run after bringing down the interface
      ## @extra wireguard.client.config.mtu int MTU value (default: 1420)
      ## @extra wireguard.client.config.persistentKeepalive int Persistent keepalive in seconds, 0 to disable (default: 25)

      ## @param wireguard.client.config.endpoint string Endpoint ip or hostname with port of the WireGuard server
      endpoint: "vpn.example.com:51820"

## @section ServiceAccount configuration
serviceAccount:
  ## @param serviceAccount.create bool Specifies whether a service account should be created
  create: true
  ## @param serviceAccount.automount bool Automatically mount ServiceAccount API credentials
  automount: true
  ## @param serviceAccount.annotations object Annotations to add to the service account
  annotations: {}
  ## @param serviceAccount.name string Name of the service account. If not set and create is true, a name is generated
  name: ""

## @param podAnnotations object Annotations to add to the pod
podAnnotations: {}
## @param podLabels object Labels to add to the pod
podLabels: {}

## @section Security Context
## @descriptionStart
## Security context configuration for pod and container.
## E.g.
## ```yaml
## podSecurityContext:
##   fsGroup: 1000
##   sysctls:
##     - name: net.ipv4.ip_forward
##       value: "1"
##
## securityContext:
##   capabilities:
##     add:
##       - NET_ADMIN
##       - SYS_MODULE
##   privileged: false
## ```
## @descriptionEnd

## @param podSecurityContext object Security context for the pod
podSecurityContext: {}

## @param securityContext object Security context for the container
securityContext: {}

## @section Service configuration (used for server mode)
service:
  ## @param service.type string Service type (NodePort, LoadBalancer, ClusterIP)
  type: NodePort
  ## @param service.port int WireGuard UDP port
  port: 51820
  ## @param service.nodePort int NodePort to use when service type is NodePort
  nodePort: 31822
  ## @param service.externalIPs list External IPs to bind the LoadBalancer service to
  externalIPs: []

## @param resources object Resource limits and requests for the container
## E.g.
## ```yaml
## resources:
##   limits:
##     cpu: 200m
##     memory: 256Mi
##   requests:
##     cpu: 100m
##     memory: 128Mi
## ```
resources: {}

## @section Probes configuration
livenessProbe:
  ## @param livenessProbe.enabled bool Enable liveness probe
  enabled: true
  ## @param livenessProbe.initialDelaySeconds int Initial delay before starting liveness probe
  initialDelaySeconds: 5
  ## @param livenessProbe.periodSeconds int Period between liveness probes
  periodSeconds: 10
  ## @param livenessProbe.timeoutSeconds int Timeout for liveness probe
  timeoutSeconds: 1
  ## @param livenessProbe.failureThreshold int Failure threshold for liveness probe
  failureThreshold: 3
  ## @param livenessProbe.successThreshold int Success threshold for liveness probe
  successThreshold: 1

readinessProbe:
  ## @param readinessProbe.enabled bool Enable readiness probe
  enabled: true
  ## @param readinessProbe.initialDelaySeconds int Initial delay before starting readiness probe
  initialDelaySeconds: 5
  ## @param readinessProbe.periodSeconds int Period between readiness probes
  periodSeconds: 10
  ## @param readinessProbe.timeoutSeconds int Timeout for readiness probe
  timeoutSeconds: 1
  ## @param readinessProbe.failureThreshold int Failure threshold for readiness probe
  failureThreshold: 3
  ## @param readinessProbe.successThreshold int Success threshold for readiness probe
  successThreshold: 1

startupProbe:
  ## @param startupProbe.enabled bool Enable startup probe
  enabled: true
  ## @param startupProbe.initialDelaySeconds int Initial delay before starting startup probe
  initialDelaySeconds: 15
  ## @param startupProbe.periodSeconds int Period between startup probes
  periodSeconds: 10
  ## @param startupProbe.timeoutSeconds int Timeout for startup probe
  timeoutSeconds: 1
  ## @param startupProbe.failureThreshold int Failure threshold for startup probe
  failureThreshold: 10
  ## @param startupProbe.successThreshold int Success threshold for startup probe
  successThreshold: 1

## @param customLivenessProbe object Override default liveness probe
customLivenessProbe: {}

## @param customReadinessProbe object Override default readiness probe
customReadinessProbe: {}

## @param customStartupProbe object Override default startup probe
customStartupProbe: {}

## @section Autoscaling configuration
autoscaling:
  ## @param autoscaling.enabled bool Enable horizontal pod autoscaling
  enabled: false
  ## @param autoscaling.minReplicas int Minimum number of replicas
  minReplicas: 1
  ## @param autoscaling.maxReplicas int Maximum number of replicas
  maxReplicas: 100
  ## @param autoscaling.targetCPUUtilizationPercentage int Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  ## @extra autoscaling.targetMemoryUtilizationPercentage int Target memory utilization percentage

## @section Extra Volumes
## @descriptionStart
## Additional volumes and volume mounts for the deployment.
## E.g.
## ```yaml
## extraVolumes:
##   - name: custom-scripts
##     configMap:
##       name: wireguard-scripts
##   - name: tls-certs
##     secret:
##       secretName: wireguard-tls
##
## extraVolumeMounts:
##   - name: custom-scripts
##     mountPath: /scripts
##     readOnly: true
##   - name: tls-certs
##     mountPath: /etc/wireguard/tls
##     readOnly: true
## ```
## @descriptionEnd

## @param extraVolumes list Additional volumes for the deployment
extraVolumes: []

## @param extraVolumeMounts list Additional volume mounts for the container
extraVolumeMounts: []

## @section Scheduling
## @descriptionStart
## Node selection, tolerations, and affinity rules for pod scheduling.
## E.g.
## ```yaml
## nodeSelector:
##   kubernetes.io/os: linux
##   node-role.kubernetes.io/vpn: "true"
##
## tolerations:
##   - key: "dedicated"
##     operator: "Equal"
##     value: "vpn"
##     effect: "NoSchedule"
##
## affinity:
##   nodeAffinity:
##     requiredDuringSchedulingIgnoredDuringExecution:
##       nodeSelectorTerms:
##         - matchExpressions:
##             - key: topology.kubernetes.io/zone
##               operator: In
##               values:
##                 - eu-west-1a
## ```
## @descriptionEnd

## @param nodeSelector object Node selector for pod assignment
nodeSelector: {}

## @param tolerations list Tolerations for pod assignment
tolerations: []

## @param affinity object Affinity rules for pod assignment
affinity: {}
